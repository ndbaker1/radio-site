<head>

	<title>Music Radio</title>
</head>
<body>
	<audio id="player" controls loop autoplay>
		<source id="player-source"></source>
		Your browser does not support the audio element.
	</audio>
	<button id="sync-button">Play Live</button>
	<script>
		function gdriveSource(gdriveId) {
			return "https://docs.google.com/uc?export=download&id=" + gdriveId
		}

		const audioPlayer = document.getElementById("player")
		const audioPlayerSource = document.getElementById("player-source")	
		const syncButton = document.getElementById("sync-button")
		syncButton.addEventListener('click', () => fetch('/song')
			.then(data => data.json())
			.then(res => {
				// load source and reload URIs
				audioPlayerSource.src = gdriveSource(res.id)
				audioPlayer.load()
				// set the player Timestamp and start
				audioPlayer.currentTime = res.currentTime
				audioPlayer.play()
			})
		)
	</script>
</body>
